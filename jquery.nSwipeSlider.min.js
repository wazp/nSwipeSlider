/*!
 * nSwipeSlider - https://github.com/wazp/nSwipeSlider
 * Item slider, using css transitions in enabled browsers and jquery animation in disabled ones.
 * Using jquery.event.move 1.3.1 and jQuery.event.swipe 0.5 by Stephan Band:
 * https://github.com/stephband/jquery.event.move - https://github.com/stephband/jquery.event.swipe
 *
 *
 * And yes, I did just call IE <=9 disabled.
 */
(function(a){a.fn.nSwipeSlider=function(f){if(typeof(jQuery.event.special.movestart)=="undefined"){(function(g){if(typeof define==="function"&&define.amd){define(["jquery"],g)}else{g(jQuery)}})(function(an,ax){var aE=6,aC=an.event.add,ak=an.event.remove,ah=function(h,i,g){an.event.trigger(i,g,h)},ad=(function(){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(g,h){return window.setTimeout(function(){g()},25)})})(),aA={textarea:true,input:true,select:true,button:true,video:true,embed:true,object:true},ay={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},aD={move:"touchmove",cancel:"touchend",end:"touchend"};function at(i){var g=i,h=false,k=false;function j(l){if(h){g();ad(j);k=true;h=false}else{k=false}}this.kick=function(l){h=true;if(!k){j()}};this.end=function(l){var m=g;if(!l){return}if(!k){l()}else{g=h?function(){m();l()}:l;h=true}}}function V(){return true}function Q(){return false}function ae(g){g.preventDefault()}function S(g){if(aA[g.target.tagName.toLowerCase()]){return}g.preventDefault()}function aa(g){return(g.which===1&&!g.ctrlKey&&!g.altKey)}function U(h,g){var i,j;if(h.identifiedTouch){return h.identifiedTouch(g)}i=-1;j=h.length;while(++i<j){if(h[i].identifier===g){return h[i]}}}function av(h,i){var g=U(h.changedTouches,i.identifier);if(!g){return}if(g.pageX===i.pageX&&g.pageY===i.pageY){return}return g}function ar(g){var h;if(!aa(g)){return}h={target:g.target,startX:g.pageX,startY:g.pageY,timeStamp:(typeof(g.timeStamp)=="undefined")?new Date().getTime():g.timeStamp};aC(document,ay.move,al,h);aC(document,ay.cancel,ai,h)}function al(g){var h=g.data;ao(g,h,g,ag)}function ai(g){ag()}function ag(){ak(document,ay.move,al);ak(document,ay.cancel,ag)}function R(h){var g,i;if(aA[h.target.tagName.toLowerCase()]){return}g=h.changedTouches[0];i={target:g.target,startX:g.pageX,startY:g.pageY,timeStamp:new Date().getTime(),identifier:g.identifier};aC(document,aD.move+"."+g.identifier,aq,i);aC(document,aD.cancel+"."+g.identifier,ac,i)}function aq(h){var i=h.data,g=av(h,i);if(!g){return}ao(h,i,g,T)}function ac(h){var i=h.data,g=U(h.changedTouches,i.identifier);if(!g){return}T(i.identifier)}function T(g){ak(document,"."+g,aq);ak(document,"."+g,ac)}function ao(h,i,g,j){var k=g.pageX-i.startX,l=g.pageY-i.startY;if((k*k)+(l*l)<(aE*aE)){return}ap(h,i,g,k,l,j)}function Y(){this._handled=V;return false}function W(g){g._handled()}function ap(k,g,m,h,j,i){var n=g.target,l,o;l=k.targetTouches;o=((typeof(k.timeStamp)=="undefined")?new Date().getTime():k.timeStamp)-g.timeStamp;g.type="movestart";g.distX=h;g.distY=j;g.deltaX=h;g.deltaY=j;g.pageX=m.pageX;g.pageY=m.pageY;g.velocityX=h/o;g.velocityY=j/o;g.targetTouches=l;g.finger=l?l.length:1;g._handled=Y;g._preventTouchmoveDefault=function(){k.preventDefault()};ah(g.target,g);i(g.identifier)}function Z(h){var i=h.data.event,g=h.data.timer;ab(i,h,((typeof(h.timeStamp)=="undefined")?new Date().getTime():h.timeStamp),g)}function aF(h){var i=h.data.event,g=h.data.timer;aG();aj(i,g,function(){setTimeout(function(){ak(i.target,"click",Q)},0)})}function aG(g){ak(document,ay.move,Z);ak(document,ay.end,aF)}function af(i){var j=i.data.event,g=i.data.timer,h=av(i,j);if(!h){return}i.preventDefault();j.targetTouches=i.targetTouches;ab(j,h,((typeof(i.timeStamp)=="undefined")?new Date().getTime():i.timeStamp),g)}function az(i){var j=i.data.event,g=i.data.timer,h=U(i.changedTouches,j.identifier);if(!h){return}aw(j);aj(j,g)}function aw(g){ak(document,"."+g.identifier,af);ak(document,"."+g.identifier,az)}function ab(j,g,k,h){var i=k-j.timeStamp;j.type="move";j.distX=g.pageX-j.startX;j.distY=g.pageY-j.startY;j.deltaX=g.pageX-j.pageX;j.deltaY=g.pageY-j.pageY;j.velocityX=0.3*j.velocityX+0.7*j.deltaX/i;j.velocityY=0.3*j.velocityY+0.7*j.deltaY/i;j.pageX=g.pageX;j.pageY=g.pageY;h.kick()}function aj(h,g,i){g.end(function(){h.type="moveend";ah(h.target,h);return i&&i()})}function aB(g,h,i){aC(this,"movestart.move",W);return true}function am(g){ak(this,"dragstart drag",ae);ak(this,"mousedown touchstart",S);ak(this,"movestart",W);return true}function X(g){if(g.namespace==="move"||g.namespace==="moveend"){return}aC(this,"dragstart."+g.guid+" drag."+g.guid,ae,ax,g.selector);aC(this,"mousedown."+g.guid,S,ax,g.selector)}function au(g){if(g.namespace==="move"||g.namespace==="moveend"){return}ak(this,"dragstart."+g.guid+" drag."+g.guid);ak(this,"mousedown."+g.guid)}an.event.special.movestart={setup:aB,teardown:am,add:X,remove:au,_default:function(g){var i,h;if(!g._handled()){return}i={target:g.target,startX:g.startX,startY:g.startY,pageX:g.pageX,pageY:g.pageY,distX:g.distX,distY:g.distY,deltaX:g.deltaX,deltaY:g.deltaY,velocityX:g.velocityX,velocityY:g.velocityY,timeStamp:g.timeStamp,identifier:g.identifier,targetTouches:g.targetTouches,finger:g.finger};h={event:i,timer:new at(function(j){ah(g.target,i)})};if(g.identifier===ax){aC(g.target,"click",Q);aC(document,ay.move,Z,h);aC(document,ay.end,aF,h)}else{g._preventTouchmoveDefault();aC(document,aD.move+"."+g.identifier,af,h);aC(document,aD.end+"."+g.identifier,az,h)}}};an.event.special.move={setup:function(){aC(this,"movestart.move",an.noop)},teardown:function(){ak(this,"movestart.move",an.noop)}};an.event.special.moveend={setup:function(){aC(this,"movestart.moveend",an.noop)},teardown:function(){ak(this,"movestart.moveend",an.noop)}};aC(document,"mousedown.move",ar);aC(document,"touchstart.move",R);if(typeof Array.prototype.indexOf==="function"){(function(h,g){var i=["changedTouches","targetTouches"],j=i.length;while(j--){if(h.event.props.indexOf(i[j])===-1){h.event.props.push(i[j])}}})(an)}})}if(typeof(jQuery.event.special.swipe)=="undefined"){(function(g){if(typeof define==="function"&&define.amd){define(["jquery"],g)}else{g(jQuery)}})(function(l,k){var m=l.event.add,p=l.event.remove,o=function(h,q,g){l.event.trigger(q,g,h)},n={threshold:0.4,sensitivity:6};function i(g){var r,q,h;r=g.target.offsetWidth;q=g.target.offsetHeight;h={distX:g.distX,distY:g.distY,velocityX:g.velocityX,velocityY:g.velocityY,finger:g.finger};if(g.distX>g.distY){if(g.distX>-g.distY){if(g.distX/r>n.threshold||g.velocityX*g.distX/r*n.sensitivity>1){h.type="swiperight";o(g.currentTarget,h)}}else{if(-g.distY/q>n.threshold||g.velocityY*g.distY/r*n.sensitivity>1){h.type="swipeup";o(g.currentTarget,h)}}}else{if(g.distX>-g.distY){if(g.distY/q>n.threshold||g.velocityY*g.distY/r*n.sensitivity>1){h.type="swipedown";o(g.currentTarget,h)}}else{if(-g.distX/r>n.threshold||g.velocityX*g.distX/r*n.sensitivity>1){h.type="swipeleft";o(g.currentTarget,h)}}}}function j(h){var g=l.data(h,"event_swipe");if(!g){g={count:0};l.data(h,"event_swipe",g)}return g}l.event.special.swipe=l.event.special.swipeleft=l.event.special.swiperight=l.event.special.swipeup=l.event.special.swipedown={setup:function(g,h,q){var g=j(this);if(g.count++>0){return}m(this,"moveend",i);return true},teardown:function(){var g=j(this);if(--g.count>0){return}p(this,"moveend",i);return true},settings:n}})}var e={wrapAround:true,nonTransSpeed:200},d=a.extend(e,f),c=(function(h,g){h=(new Image).style;g="ransition";return"t"+g in h||"webkitT"+g in h||"MozT"+g in h||"OT"+g in h})(),b=(function(){var g,h=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"otransitionend",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(g in i){if(h.style[g]!==undefined){return i[g]}}})();return this.each(function(){if(typeof(a(this).data("nSwipeSlider"))!="undefined"){return}a(this).data("nSwipeSlider",{loaded:true});if(d.wrapAround){a(this).find("> div").eq(0).clone(true).appendTo(a(this)).removeClass("active");a(this).find("> div").eq(a(this).find("> div").length-2).clone(true).prependTo(a(this))}var g=a(this),o=g.find("> div"),m=o.filter(".active"),h=o.index(m),j=g.width();o.on("movestart",function(i){g.addClass("notransition");if((i.distX>i.distY&&i.distX<-i.distY)||(i.distX<i.distY&&i.distX>-i.distY)){i.preventDefault();return}g.trigger("nSwipeSlider.swipeStart",[a(this),h])}).on("move",function(p){var i=100*p.distX/j;if(p.distX<0){if(o[h+1]){o[h].style.left=i+"%";o[h+1].style.left=(i+100)+"%"}else{o[h].style.left=i/4+"%"}}if(p.distX>0){if(o[h-1]){o[h].style.left=i+"%";o[h-1].style.left=(i-100)+"%"}else{o[h].style.left=i/5+"%"}}}).on("moveend",function(i){if(c){g.removeClass("notransition");n()}else{o.eq(h).animate({left:0},d.nonTransSpeed,function(){g.removeClass("notransition");n()});o.eq(h).prev("div").animate({left:"-100%"},d.nonTransSpeed);o.eq(h).next("div").animate({left:"100%"},d.nonTransSpeed)}}).on("swipeleft",function(i){if(h===o.length-1){return}o.eq(h+1).trigger("slideTo")}).on("swiperight",function(i){if(h===0){return}o.eq(h-1).trigger("slideTo")}).on("slideTo",function(p){if(c){o.eq(h).removeClass("active");a(p.target).addClass("active");p.target.addEventListener(b,k,true);h=o.index(p.target)}else{o.stop(true);var i=(h>o.index(p.target))?"100%":"-100%";o.eq(h).animate({left:i},d.nonTransSpeed,function(){a(this).removeClass("active");a(p.target).addClass("active");h=o.index(p.target);if(d.wrapAround){l()}setTimeout(n,20)});a(p.target).animate({left:0},d.nonTransSpeed,function(){g.trigger("nSwipeSlider.swipeDone",[a(this),h])})}});function l(){if(h===0){g.addClass("notransition");o.eq(h).removeClass("active").end().eq(o.length-2).addClass("active");h=o.length-2;setTimeout(function(){g.removeClass("notransition")},d.nonTransSpeed)}else{if(h===(o.length-1)){g.addClass("notransition");o.eq(o.length-1).removeClass("active").end().eq(1).addClass("active");o.eq(o.length-1)[0].style.left="";h=1;setTimeout(function(){g.removeClass("notransition")},d.nonTransSpeed)}}}if(d.wrapAround&&c){o.eq(0)[0].addEventListener(b,l,true);o.eq(o.length-1)[0].addEventListener(b,l,true)}function n(){o.each(function(){a(this)[0].style.left=""})}function k(i){g.trigger("nSwipeSlider.swipeDone",[a(i.target),h]);i.target.removeEventListener(b,k,true)}})}})(jQuery);